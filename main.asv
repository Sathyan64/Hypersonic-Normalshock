P1 = 5.405E4;%Pa
T1 = -17.47+273;%K
M1 = 6.0;
U1 = M1*sqrt(1.4*287*T1);
rho1 = (P1/(287*T1));%kg/m^3
rho_ratio_new = 0.1;
while rho_ratio_diff > 1E-5
  rho2 = rho1*rho_ratio_new;
  P2 = P1+rho1*u1*u1*(1-rho_ratio);
  h2 = h1+(u1*u1*(1/2)*(1-(rho_ratio)^2));
  X = log(P2/1.013E5);
  Y = log(rho2/1.225);
  Z = X-Y;
  gamma = coefficients(X,Y,Z);
  rho_ratio_new = ((P2/h2)*(gamma/(gamma-1)))/rho1;
    
end; 